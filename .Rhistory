library(dplyr)
use_mit_license()
usethis::use_mit_license()
library(xsarea)
devtools::load_all()
devtools::load_all()
xs_area(xs = "C:\\Users\\brownhr\\Desktop\\XS\\data/DS1XS1_1.xlsx")
xs_area(xs = readxl::read_xlsx("C:\\Users\\brownhr\\Desktop\\XS\\data/DS1XS1_1.xlsx"))
ds1 <- readxl::read_xlsx("C:\\Users\\brownhr\\Desktop\\XS\\data\\DS1XS1_1.xlsx")
ds1
xs_area(ds1)
?xs_area
?xs_area
xs_area <- function(xs){
# Mutate the InvertRod to be relative to Bankful;
# This can easily be appended to also calculate area relative to another
# feature, such as WS or whatever else.
# Set values of InvertRod > Bankful equal to Bankful, then normalize the
# whole dataset such that Bankful = 0 (baseline)
xs <- xs %>%
dplyr::mutate(Depth_Baseline = (pmin(xs$InvertRod, xs$Bankful) - xs$Bankful))?
# Approximate integration using trapezoidal rule with basepoints at x = xs$TAPE
area <- abs(pracma::trapz(x = xs$TAPE,
y = xs$Depth_Baseline))
return(area)
}
library(dplyr)
?dplyr_data_masking
devtools::load_all()
ds1 <- readxl::read_xlsx("C:/Users/brownhr/Desktop/XS/data/DS1XS1_1.xlsx")
xs_area(ds1)
xs_area(ds1, tape = "TAPE", invertrod = "InvertRod", baseline = "Bankful")
xs_area(ds1, tape = TAPE, invertrod = InvertRod, baseline = Bankful)
xs <- xs
xs_area <- function(xs, tape, invertrod, baseline){
# Mutate the InvertRod to be relative to Bankful;
# This can easily be appended to also calculate area relative to another
# feature, such as WS or whatever else.
xs <- xs
# Set values of InvertRod > Bankful equal to Bankful, then normalize the
# whole dataset such that Bankful = 0 (baseline)
xs <- xs %>%
dplyr::mutate(Depth_Baseline = (pmin({{ invertrod }}, {{ baseline }}) - {{ tape }}))?
# Approximate integration using trapezoidal rule with basepoints at x = xs$TAPE
area <- xs %>%
dplyr::summarize(area = abs(pracma::trapz(x = {{ tape }},
y = xs$Depth_Baseline)))
return(area$area)
}
rm(xs_area())
rm(xs_area
)
devtools::load_all()
xs_area(ds1)
devtools::load_all()
xs_area(ds1)
devtools::load_all()
ds1 %>% xs_area()
devtools::load_all()
ds1 %>% xs_area()
devtools::load_all()
ds1 %>% xs_area()
devtools::load_all()
ds1 %>% xs_area()
devtools::load_all()
ds1 %>% xs_area()
devtools::load_all()
ds1 %>% xs_area()
xs_area(ds1)
library(ggplot2)
source("C:/Users/brownhr/Desktop/XS/xsarea/R/xs_ribbon.R")
source("C:/Users/brownhr/Desktop/XS/xsarea/R/xs_ribbon.R")
xs_ribbon(ds1)
xs_list <- list.files(path = "C:\\Users\\brownhr\\Desktop\\XS\\data", pattern = ".xlsx", full.names = T)
xs_gg <- lapply(xs_list, xs_ribbon)
xs_gg <- lapply(xs_list, function(x){xs_ribbon(readxl::read_xlsx(x))})
cowplot::plot_grid(plotlist = xs_gg, labels = rownames(xs_areas))
cowplot::plot_grid(plotlist = xs_gg)
library(xsarea)
devtools::install_github("brownhr/xsarea")
devtools::install_github("brownhr/xsarea")
library(xsarea)
install.packages("cli")
install.packages("cli")
install.packages("cli")
install.packages("cli")
library(xsarea)
library(xsarea)
